<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Tebak-Tebakan</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { /* Gunakan variabel warna yang sama */
            --bg-color: #fdf0d5;
            --primary-color: #66d9ef; /* Warna tema tebak */
            --primary-hover: #4fc3f7;
            --secondary-color: #f08080; /* Warna opsi */
            --secondary-hover: #e57373;
            --text-color: #333;
            --white-color: #fff;
            --correct-color: #81c784; /* Hijau lebih lembut */
            --wrong-color: #e57373; /* Merah lebih lembut */
            --border-radius: 15px;
        }

        body {
            background-color: var(--bg-color);
            font-family: 'Poppins', sans-serif;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            font-size: clamp(2rem, 8vw, 3.5rem);
            color: var(--primary-color);
            margin-bottom: 1em;
            text-align: center;
        }

        /* Kontainer untuk tombol pilihan awal */
        #pilihan-kategori {
             display: flex;
             flex-direction: column;
             gap: 20px;
             width: 90%;
             max-width: 500px;
             margin-bottom: 30px;
        }

        .button-kategori { /* Tombol pilih Hewan/Buah */
            padding: 20px 30px;
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            background-color: var(--primary-color);
            color: var(--white-color);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            width: 100%;
        }
        .button-kategori:hover {
            background-color: var(--primary-hover);
            transform: scale(1.03);
        }
         .button-kategori:active {
            transform: scale(0.98);
        }


        /* Kontainer untuk Kuis */
        #kuis-container {
            display: none; /* Sembunyikan awalnya */
            width: 100%;
            max-width: 600px;
            text-align: center;
        }

        #soal {
            font-size: clamp(1.5rem, 6vw, 2.2rem);
            margin-bottom: 30px;
            min-height: 3em; /* Beri ruang agar layout stabil */
            line-height: 1.4;
        }

        #opsiJawaban {
            display: flex;
            flex-direction: column; /* Opsi vertikal */
            gap: 15px; /* Jarak antar opsi */
            margin-bottom: 30px;
        }

        .opsi {
            padding: 15px 20px;
            font-size: clamp(1.2rem, 4.5vw, 2rem);
            background-color: var(--secondary-color);
            color: var(--white-color);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
        }
        .opsi:hover {
            background-color: var(--secondary-hover);
            transform: scale(1.03);
        }
        .opsi:active {
            transform: scale(0.98);
        }

        /* Tombol Home */
         .home-btn {
            background-color: #ffcc80; /* Warna oranye lembut */
            color: var(--text-color);
            padding: 15px 25px;
            font-size: clamp(1rem, 4vw, 1.5rem);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            margin-top: 20px; /* Jarak dari elemen terakhir */
            display: inline-flex; /* Agar ikon dan teks sejajar */
            align-items: center;
            gap: 8px;
        }
        .home-btn:hover {
            background-color: #ffb74d; /* Oranye lebih gelap */
            transform: scale(1.05);
        }
         .home-btn:active {
            transform: scale(0.98);
        }


        /* Notifikasi */
        #notifikasi-overlay { /* Lapisan latar belakang gelap */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5); /* Semi transparan */
            display: none; /* Sembunyikan awalnya */
            justify-content: center;
            align-items: center;
            z-index: 1000; /* Pastikan di atas elemen lain */
        }
        #notifikasi {
            font-size: clamp(2.5rem, 10vw, 5rem);
            padding: 30px 50px;
            border-radius: var(--border-radius);
            color: var(--white-color);
            display: flex; /* Untuk ikon */
            flex-direction: column;
            align-items: center;
            gap: 15px;
            transform: scale(0.5); /* Mulai dari kecil */
            opacity: 0;
            transition: transform 0.3s ease-out, opacity 0.3s ease-out; /* Animasi muncul */
        }
         #notifikasi i { /* Ikon di notifikasi */
             font-size: 1.2em;
         }

        .benar { background-color: var(--correct-color); }
        .salah { background-color: var(--wrong-color); }

        /* Animasi untuk show/hide notifikasi */
        #notifikasi-overlay.show #notifikasi {
            transform: scale(1);
            opacity: 1;
        }

        /* Progress Bar (opsional tapi bagus) */
        #progress-container {
            width: 80%;
            max-width: 400px;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin: 20px auto; /* Tengah horizontal */
            overflow: hidden; /* Agar progress bar tidak keluar */
        }
        #progress-bar {
            width: 0%; /* Mulai dari 0 */
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 10px;
            transition: width 0.5s ease; /* Animasi progress */
        }
         #level-info {
             font-size: clamp(1rem, 3.5vw, 1.3rem);
             margin-top: 5px;
             color: var(--text-color);
         }

    </style>
</head>
<body>
    <h1>Pilih Tebak-Tebakan</h1>

    <div id="pilihan-kategori">
        <button class="button-kategori" onclick="mulaiLevel('hewan')"> <i class="fas fa-paw"></i> Tebak Hewan</button>
        <button class="button-kategori" onclick="mulaiLevel('buah')"> <i class="fas fa-apple-alt"></i> Tebak Buah</button>
    </div>

    <div id="kuis-container">
        <div id="soal"></div>
        <div id="progress-container">
            <div id="progress-bar"></div>
        </div>
         <div id="level-info"></div>
        <div id="opsiJawaban"></div>
    </div>

     
    <div id="notifikasi-overlay">
        <div id="notifikasi">
            <i class=""></i> {/* Ikon akan diisi JS */}
            <span id="notifikasi-teks"></span>
        </div>
    </div>

    <button class="home-btn" onclick="kembaliKeMenu()"> <i class="fas fa-home"></i> Home</button>

    <script>
        let jawabanBenar, currentLevel = 0, currentSoal = 0, jenisSoal;
        const soalPerLevel = 5; // Kurangi jumlah soal per level agar tidak terlalu lama
        const totalLevel = 3;

        // --- DATA SOAL (CONTOH SUDAH DIPERBAIKI) ---
        const levels = {
            hewan: [
                [ // Level 1 (Lebih mudah, deskriptif)
                    { soal: "Aku besar, punya belalai panjang, dan telingaku lebar. Siapakah aku?", jawaban: "gajah", opsi: ["gajah", "badak", "kuda nil"] },
                    { soal: "Aku suka makan wortel dan melompat dengan telinga panjangku. Siapakah aku?", jawaban: "kelinci", opsi: ["kelinci", "kanguru", "kucing"] },
                    { soal: "Aku bisa terbang dan suaraku merdu di pagi hari. Siapakah aku?", jawaban: "burung", opsi: ["burung", "ayam", "lebah"] },
                    { soal: "Aku punya tempurung keras dan jalanku lambat. Siapakah aku?", jawaban: "kura-kura", opsi: ["kura-kura", "kepiting", "semut"] },
                    { soal: "Aku mengeong dan suka dielus. Siapakah aku?", jawaban: "kucing", opsi: ["kucing", "anjing", "tikus"] }
                ],
                [ // Level 2 (Sedikit lebih sulit)
                    { soal: "Aku raja hutan dengan surai di leherku. Siapakah aku?", jawaban: "singa", opsi: ["singa", "harimau", "beruang"] },
                    { soal: "Aku berenang di air, punya sirip dan ekor. Siapakah aku?", jawaban: "ikan", opsi: ["ikan", "udang", "katak"] },
                    { soal: "Aku punya leher sangat panjang untuk makan daun di pohon tinggi. Siapakah aku?", jawaban: "jerapah", opsi: ["jerapah", "unta", "zebra"] },
                    { soal: "Aku hitam putih dan suka makan bambu. Siapakah aku?", jawaban: "panda", opsi: ["panda", "beruang kutub", "koala"] },
                    { soal: "Aku menggonggong dan menjaga rumah. Siapakah aku?", jawaban: "anjing", opsi: ["anjing", "serigala", "rubah"] }
                ],
                [ // Level 3 (Lebih menantang)
                     { soal: "Aku bisa berubah warna kulit sesuai tempatku. Siapakah aku?", jawaban: "bunglon", opsi: ["bunglon", "cicak", "ular"] },
                     { soal: "Aku punya kantong di perut untuk membawa anakku. Siapakah aku?", jawaban: "kanguru", opsi: ["kanguru", "koala", "kelinci"] },
                     { soal: "Aku hidup di kutub, berbulu putih tebal, dan suka ikan. Siapakah aku?", jawaban: "beruang kutub", opsi: ["beruang kutub", "penguin", "anjing laut"] },
                     { soal: "Aku punya banyak lengan dan hidup di laut dalam. Siapakah aku?", jawaban: "gurita", opsi: ["gurita", "cumi-cumi", "ubur-ubur"] },
                     { soal: "Aku lari sangat cepat dan punya bintik hitam di tubuhku. Siapakah aku?", jawaban: "cheetah", opsi: ["cheetah", "macan tutul", "jaguar"] }
                ]
            ],
            buah: [
                [ // Level 1 (Buah umum)
                    { soal: "Aku berwarna kuning, panjang, dan disukai monyet. Buah apakah aku?", jawaban: "pisang", opsi: ["pisang", "jagung", "mentimun"] },
                    { soal: "Aku merah atau hijau, renyah saat digigit. Buah apakah aku?", jawaban: "apel", opsi: ["apel", "semangka", "ceri"] },
                    { soal: "Aku kecil-kecil bergerombol, bisa ungu atau hijau. Buah apakah aku?", jawaban: "anggur", opsi: ["anggur", "stroberi", "blueberry"] },
                    { soal: "Aku bulat, berwarna oranye, dan punya banyak air. Buah apakah aku?", jawaban: "jeruk", opsi: ["jeruk", "labu", "melon"] },
                    { soal: "Aku besar, hijau di luar, merah di dalam, banyak airnya. Buah apakah aku?", jawaban: "semangka", opsi: ["semangka", "melon", "kelapa"] }
                 ],
                [ // Level 2
                    { soal: "Aku kecil, merah, manis, dan sering ada di atas kue. Buah apakah aku?", jawaban: "ceri", opsi: ["ceri", "stroberi", "tomat"] }, // Tomat sbg pengecoh bisa
                    { soal: "Kulitku berduri tajam, tapi dagingku kuning dan harum. Buah apakah aku?", jawaban: "durian", opsi: ["durian", "nangka", "salak"] },
                    { soal: "Aku kuning, kulitku kasar seperti nanas, tapi lebih kecil dan manis. Buah apakah aku?", jawaban: "nanas", opsi: ["nanas", "mangga", "pepaya"] }, // Disesuaikan
                    { soal: "Aku hijau atau kuning, dagingku lembut dan punya biji besar di tengah. Buah apakah aku?", jawaban: "mangga", opsi: ["mangga", "alpukat", "jambu biji"] },
                    { soal: "Kulitku coklat berbulu, dagingku hijau dan ada biji hitam kecil. Buah apakah aku?", jawaban: "kiwi", opsi: ["kiwi", "sawo", "markisa"] }
                ],
                [ // Level 3
                    { soal: "Aku merah, punya banyak biji kecil di luar kulitku. Buah apakah aku?", jawaban: "stroberi", opsi: ["stroberi", "frambos", "delima"] },
                    { soal: "Bentukku seperti bintang jika dipotong. Buah apakah aku?", jawaban: "belimbing", opsi: ["belimbing", "nanas", "pisang"] },
                    { soal: "Aku ungu di luar, putih di dalam, rasanya manis asam segar. Buah apakah aku?", jawaban: "manggis", opsi: ["manggis", "anggur", "terong ungu"] }, // Terong sbg pengecoh
                    { soal: "Aku besar, kulitku keras, airku bisa diminum, dagingku putih. Buah apakah aku?", jawaban: "kelapa", opsi: ["kelapa", "semangka", "melon"] },
                    { soal: "Aku merah, bijiku banyak dan seperti permata. Buah apakah aku?", jawaban: "delima", opsi: ["delima", "jambu biji", "stroberi"] }
                ]
            ]
        };

        // Fungsi untuk mengacak array (Fisher-Yates Shuffle)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Tukar elemen
            }
        }

        function mulaiLevel(jenis) {
            jenisSoal = jenis;
            currentLevel = 0;
            currentSoal = 0;
            document.getElementById('pilihan-kategori').style.display = 'none'; // Sembunyikan pilihan awal
            document.getElementById('kuis-container').style.display = 'block'; // Tampilkan kuis
            tampilkanSoal();
        }

        function tampilkanSoal() {
            // Cek jika soal di level ini habis
            if (currentSoal >= soalPerLevel) {
                currentLevel++;
                currentSoal = 0;
                 // Beri pesan antar level (opsional)
                 if(currentLevel < totalLevel) {
                    tampilkanNotifikasi(`Level ${currentLevel} Selesai!`, 'lanjut', true); // Tampilkan pesan lanjut
                    setTimeout(() => { // Tunda soal berikutnya
                         sembunyikanNotifikasi();
                         // Tampilkan soal level baru
                        let soal = levels[jenisSoal][currentLevel][currentSoal];
                        jawabanBenar = soal.jawaban;
                        document.getElementById('soal').innerHTML = soal.soal;
                        let opsiAcak = [...soal.opsi]; // Salin array opsi
                        shuffleArray(opsiAcak); // Acak opsi
                        let opsiHtml = '';
                        opsiAcak.forEach(opsi => {
                            opsiHtml += `<button class="opsi" onclick="cekJawaban('${opsi}')">${opsi}</button>`;
                        });
                        document.getElementById('opsiJawaban').innerHTML = opsiHtml;
                        updateProgressBar();
                    }, 2500); // Jeda 2.5 detik
                    return; // Hentikan eksekusi tampilkanSoal saat ini
                 }
            }

            // Cek jika semua level selesai
            if (currentLevel >= totalLevel) {
                tampilkanNotifikasi('Selamat! Semua level selesai!', 'selesai', false); // Tampilkan pesan selesai
                // Jangan sembunyikan otomatis, tunggu user klik home
                document.getElementById('kuis-container').style.display = 'none'; // Sembunyikan kuis
                return;
            }

            // Tampilkan soal normal
            let soal = levels[jenisSoal][currentLevel][currentSoal];
            jawabanBenar = soal.jawaban;
            document.getElementById('soal').innerHTML = soal.soal;

            let opsiAcak = [...soal.opsi]; // Salin array opsi
            shuffleArray(opsiAcak);       // Acak opsi

            let opsiHtml = '';
            opsiAcak.forEach(opsi => {
                opsiHtml += `<button class="opsi" onclick="cekJawaban('${opsi}')">${opsi}</button>`;
            });
            document.getElementById('opsiJawaban').innerHTML = opsiHtml;
            updateProgressBar(); // Update progress bar setiap soal
        }

        function cekJawaban(jawaban) {
             // Nonaktifkan tombol sementara
             disableOptions(true);

            if (jawaban === jawabanBenar) {
                tampilkanNotifikasi('Benar!', 'benar', true);
            } else {
                tampilkanNotifikasi(`Salah! Jawaban: ${jawabanBenar}`, 'salah', true);
            }

            // Tunggu notifikasi selesai, baru lanjut
            setTimeout(() => {
                sembunyikanNotifikasi();
                currentSoal++;
                tampilkanSoal();
                 disableOptions(false); // Aktifkan kembali tombol
            }, 2000); // Sesuaikan durasi tampil notifikasi
        }

         // Fungsi untuk menonaktifkan/mengaktifkan tombol opsi
         function disableOptions(disabled) {
             const buttons = document.querySelectorAll('#opsiJawaban .opsi');
             buttons.forEach(button => {
                 button.disabled = disabled;
             });
         }

        function tampilkanNotifikasi(pesan, tipe, autoHide) {
            const overlay = document.getElementById('notifikasi-overlay');
            const notifikasi = document.getElementById('notifikasi');
            const notifikasiTeks = document.getElementById('notifikasi-teks');
            const ikon = notifikasi.querySelector('i');

            notifikasiTeks.textContent = pesan;
            notifikasi.className = ''; // Reset class
            ikon.className = ''; // Reset ikon class

            if (tipe === 'benar') {
                notifikasi.classList.add('benar');
                ikon.classList.add('fas', 'fa-check-circle'); // Ikon centang
            } else if (tipe === 'salah') {
                notifikasi.classList.add('salah');
                ikon.classList.add('fas', 'fa-times-circle'); // Ikon silang
            } else if (tipe === 'selesai') {
                notifikasi.classList.add('benar'); // Warna hijau untuk selesai
                ikon.classList.add('fas', 'fa-trophy'); // Ikon piala
            } else if (tipe === 'lanjut') {
                 notifikasi.classList.add('benar'); // Warna hijau untuk lanjut
                 ikon.classList.add('fas', 'fa-arrow-circle-right'); // Ikon panah
            }


            overlay.style.display = 'flex'; // Tampilkan overlay
            setTimeout(() => { // Beri sedikit waktu sebelum animasi
                 overlay.classList.add('show'); // Mulai animasi (CSS)
            }, 10);

            // Sembunyikan otomatis jika perlu
            // if (autoHide) { // Hapus autohide dari sini, pindahkan ke cekJawaban
            //     setTimeout(sembunyikanNotifikasi, 2000); // Durasi tampil notifikasi
            // }
        }

        function sembunyikanNotifikasi() {
            const overlay = document.getElementById('notifikasi-overlay');
             overlay.classList.remove('show'); // Mulai animasi hide
            // Tunggu animasi selesai sebelum display none
             setTimeout(() => {
                overlay.style.display = 'none';
             }, 300); // Sesuaikan dengan durasi transisi CSS
        }

        function updateProgressBar() {
            const progressBar = document.getElementById('progress-bar');
            const levelInfo = document.getElementById('level-info');
            const totalSoalInLevel = soalPerLevel;
            const progress = (currentSoal / totalSoalInLevel) * 100;

            progressBar.style.width = `${progress}%`;
             levelInfo.textContent = `Level ${currentLevel + 1} - Soal ${currentSoal + 1}/${totalSoalInLevel}`;
        }

         function kembaliKeMenu() {
            // Sembunyikan kuis dan notifikasi jika ada
             document.getElementById('kuis-container').style.display = 'none';
             sembunyikanNotifikasi();
             // Tampilkan lagi pilihan kategori
            document.getElementById('pilihan-kategori').style.display = 'flex';
             document.querySelector('h1').textContent = 'Pilih Tebak-Tebakan'; // Kembalikan judul
         }

         // Panggil kembaliKeMenu saat tombol home diklik
        // document.querySelector('.home-btn').onclick = kembaliKeMenu; // Atau langsung di HTML

    </script>
</body>
</html>
